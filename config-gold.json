{
    "config": {
        "showExit1": false,
        "cachedFields": {
            "commitMessage": {
                "desc": "Commit message",
                "default": "commit",
                "input":true
            }
        }
    },
    "actions": [
        {
            "name": "Start Code",
            "desc": "Start the dev environment",
            "list": [
                {
                    "cmd": "code",
                    "args": [
                        "."
                    ]
                }
            ]
        },
        {
            "name": "Git details",
            "desc": "Check local files",
            "list": [
                {
                    "cmd": "git",
                    "args": ["config","-l"],
                    "outFilter":"user.name",
                    "outFile":"memory:gituser"
                }
             ]
        },{
            "name": "Git USER",
            "desc": "Check local files",
            "list": [
                {
                    "cmd": "echo",
                    "args": ["git user = %{gituser}"]

                }
             ]
        },{
            "name": "Git status",
            "desc": "Check local files",
            "list": [
                {
                    "cmd": "clear",
                    "args": []
                },
                {
                    "cmd": "git",
                    "args": [
                        "status"
                    ]
                }
            ]
        },
        {
            "name": "Git add",
            "desc": "Stage local files",
            "list": [
                {
                    "cmd": "git",
                    "args": [
                        "add",
                        "."
                    ]
                }
            ]
        },
        {
            "name": "Git commit",
            "desc": "Commit local files",
            "list": [
                {
                    "cmd": "git",
                    "args": [
                        "commit",
                        "-m",
                        "%{commitMessage}"
                    ]
                }
            ]
        },
        {
            "name": "Create push",
            "desc": "Script for stuartdd",
            "list": [
                {
                    "cmd": "wget",
                    "outFile": "memory:stuartdd",
                    "args": [
                        "-q",
                        "--output-document=-",
                        "http://192.168.1.243:8080/files/user/stuart/loc/mydb/name/stuartdd"
                    ]
                },
                {
                    "cmd": "echo",
                    "outFile": "gitpush.sh",
                    "args": [
                        "gitpush.sh stuartdd %{stuartdd} &"
                    ]
                },
                {
                    "cmd": "chmod",
                    "args": [
                        "+x",
                        "gitpush.sh"
                    ]
                }
            ]
        },
        {
            "name": "Create push",
            "desc": "Script for stuartdd2",
            "list": [
                {
                    "cmd": "wget",
                    "outFile": "memory:stuartdd2",
                    "args": [
                        "-q",
                        "--output-document=-",
                        "http://192.168.1.243:8080/files/user/stuart/loc/mydb/name/stuartdd2"
                    ]
                },
                {
                    "cmd": "echo",
                    "outFile": "gitpush.sh",
                    "args": [
                        "gitpush.sh stuartdd2 %{stuartdd2} &"
                    ]
                },
                {
                    "cmd": "chmod",
                    "args": [
                        "+x",
                        "gitpush.sh"
                    ]
                }
            ]
        },
        {
            "name": "Remove push",
            "desc": "Remove push script gitpush.sh",
            "list": [
                {
                    "cmd": "rm",
                    "args": [
                        "gitpush.sh"
                    ]
                }
            ]
        },
        {
            "name": "Create Looper",
            "desc": "Run gtool exec gitpush.sh, loop",
            "list": [
                {
                    "cmd": "echo",
                    "outFile": "run.sh",
                    "args": [
                        "#!/bin/bash\n",
                        "FILE=gitpush.sh\n",
                        "while true; do\n",
                        "  if [ -f \"$FILE\" ]; then\n",
                        "    rm $FILE\n",
                        "  fi\n",
                        "  ./gtool\n",
                        "  if [ $? -eq 1 ]\n",
                        "  then\n",
                        "    exit\n",
                        "  fi\n",
                        "  if [ -f \"$FILE\" ]; then\n",
                        "    ./gitpush.sh\n",
                        "  fi\n",
                        "  sleep 5\n",
                        "done\n"
                    ]
                },
                {
                    "cmd": "chmod",
                    "args": [
                        "+x",
                        "run.sh"
                    ]
                }
            ]
        }
    ]
}